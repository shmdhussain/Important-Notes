<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset="utf-8">
	<title>MessagingParent</title>
	<style type="text/css" media="screen">
		#messages{
			width:600px;
			height: 400px;
		}
		iframe{
			width: 800px;
			height: 600px;
		}
		.left{
			float: left;

		}
		.right {
			float: right;
			width: 300px;
		}
	</style>

	<script type="text/javascript" charset="utf-8" src="../scripts/jquery-1.4.2.js"></script>

</head>
<body>
	<div>
	Message:<input type="text" id="msg" />
	<input type="button" id="sendMessage" value="Send Message" />
	</div>
	<div class="left">
	<iframe id="childDoc" src="MessagingChild.html"></iframe>
	</div>
	<div class="right">
	<div id="messages"></div>
	</div>
	<script type="text/javascript" charset="utf-8">
		var childDoc = document.getElementById('childDoc').contentWindow;
		onmessage = function(event){
			$('#messages').html($('#messages').html() + '<br />' + event.data);
		}
		sendMessage = function(){
			childDoc.postMessage($('#msg').val(), 'http://localhost');
		}
		$('#sendMessage').click(sendMessage);
	</script>
</body>
</html>